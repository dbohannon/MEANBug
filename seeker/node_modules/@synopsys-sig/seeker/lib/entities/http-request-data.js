"use strict";function t(t){const e=this.headers[t];return e&&e.length>0?e[0]:null}function e(t){const e=this.params[t];return e&&e.length>0?e[0]:null}const r=require("url"),s=require("../util/http-utils"),h=require("../util/misc"),o=function(o){function n(t){const e={};for(let r in t.headers){let s=t.headers[r];Array.isArray(s)||(s=[s]),e[r]=s}return e}function a(){const t=o.headers["x-forwarded-for"]||o.connection.remoteAddress;return"::1"===t?"localhost":t}const i=r.parse(o.url,!0);this.body,this.path=i.pathname,this.method=o.method,this.protocol=o.connection.encrypted?"https":"http",this.params=s.parseQueryParams(i),this.headers=n(o),this.tstamp=Date.now(),this.contentType=o.headers["content-type"],this.remoteAddr=a(),this.contextPath="/",this.url=r.format({protocol:this.protocol,host:this.headers.host[0],path:i.path,pathname:i.pathname,search:i.search}),this.uuid=h.generateUUID(),this.getFirstHeader=t,this.getFirstParam=e};module.exports=o;