"use strict";function e(){function e(e,t){const i=t._route.path;i.indexOf("{")>0&&e.services.http.setCurrentRestTemplate(i.replace(/{(\w*)}/g,":$1")),e.services.http.emit("requestBodyInitialized",t,t.payload)}let t=!1;this.handleInstrumentation=function(s){const o=s.services.instrumentation;o.register({moduleId:"hapi/lib/handler",methodNames:"execute",type:"instance",callbacks:{__sk_doBefore:function(t,i){e(s,i[0])}}}),o.register({moduleId:"@hapi/hapi/lib/toolkit",methodNames:"execute",type:"prototype",callbacks:{__sk_doBefore:function(o,n){if(!t&&n[1]&&n[1].cookieAuth){const e=Object.getPrototypeOf(n[1].cookieAuth),o=e.set,r=e.clear;e.set=function(){return s.services.httpsession.callEmit("sessionInit",new i("hapi/cookie")),o.apply(this,arguments)},e.clear=function(){return s.services.httpsession.callEmit("sessionLogout","hapi/cookie"),r.apply(this,arguments)},t=!0}e(s,n[1])}}})}}const t=require("util"),i=require("../../entities/httpsession-data");t.inherits(e,require("events").EventEmitter),module.exports=new e;